(this.webpackJsonpsphere=this.webpackJsonpsphere||[]).push([[0],{53:function(e,t,n){},55:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var r=n(3),c=n.n(r),o=n(35),a=n.n(o),i=(n(52),n(53),n(14)),s=n(7),j=n(10),u=n(46),l=n(32),b=n(61),d=n(64),O=n(65),f=n(62),h=n(63),p=n(17),m=n(42),w=n(41),v=n(26),y=n(0);n(55);function x(e){var t=Object(r.useState)(!1),n=Object(j.a)(t,2),c=n[0],o=n[1],a=Object(r.useCallback)((function(t){t.keyCode===e&&o(!0)}),[e]),i=Object(r.useCallback)((function(t){t.keyCode===e&&o(!1)}),[e]);return Object(r.useEffect)((function(){return window.addEventListener("keydown",a),window.addEventListener("keyup",i),function(){window.removeEventListener("keydown",a),window.removeEventListener("keyup",i)}}),[a,i]),c}var g=n(15),k=Object(v.b)({key:"player",default:{orbitOffset:new y.Vector3}}),E=Object(v.b)({key:"ball",default:[],dangerouslyAllowMutability:!0}),S=0;function C(e){var t=Object(l.c)((function(){return{args:1,mass:1,type:"Static"}})),n=Object(j.a)(t,1)[0];return Object(g.jsxs)("mesh",Object(s.a)(Object(s.a)({},e),{},{ref:n,receiveShadow:!0,children:[Object(g.jsx)("sphereGeometry",{args:[1,32,32]}),Object(g.jsx)("meshToonMaterial",{attach:"material",color:"hotpink"})]}))}function L(e){var t=x(w.a),n=x(w.b),c=Object(r.useRef)(null),o=Object(r.useRef)(null),a=Object(v.c)(k),f=Object(j.a)(a,2),h=f[0],m=f[1],C=[1,.2,.1],L=Object(l.b)((function(){return{args:C,mass:1,position:[0,0,4],rotation:[Math.PI,0,0],type:"Static",onCollide:P}})),M=Object(j.a)(L,2),V=M[0],A=M[1],I=Object(v.e)(E),z=Object(u.useSpring)({to:{distort:0},from:{distort:.4},config:{duration:1500}}).distort,P=Object(r.useCallback)((function(e){z.reset()}),[z]);return function(e,t){var n=Object(r.useCallback)((function(n){n.keyCode===e&&t()}),[e,t]);Object(r.useEffect)((function(){return window.addEventListener("keypress",n),function(){window.removeEventListener("keypress",n)}}),[n])}(w.c,(function(){var e=V.current.getWorldDirection(new y.Vector3).normalize().multiplyScalar(-1),t=e.clone().multiplyScalar(1.5),n=V.current.getWorldPosition(new y.Vector3).add(e),r={angularVelocity:new y.Euler,velocity:t,position:n,ballId:++S};I((function(e){return[].concat(Object(i.a)(e),[r]).slice(-3)}))})),Object(p.b)((function(e,r){var c=new y.Vector3(0,t?-1:n?1:0,0),o=h.orbitOffset.clone().addScaledVector(c,r);m({orbitOffset:o})})),Object(p.b)((function(e,t){var n=new y.Quaternion;n.setFromAxisAngle(new y.Vector3(0,1,0),h.orbitOffset.y);var r=new y.Euler;r.setFromQuaternion(n),A.rotation.copy(r);var c=new y.Vector3(0,0,4).applyQuaternion(n);A.position.copy(c)})),Object(r.useEffect)((function(){var e=V.current;return e.addEventListener("collide",P),function(){return e.removeEventListener("collide",P)}}),[V,P]),Object(g.jsx)("group",Object(s.a)(Object(s.a)({ref:c},e),{},{children:Object(g.jsxs)(b.a,{args:C,radius:.05,smoothness:8,ref:V,receiveShadow:!0,children:[Object(g.jsx)("meshPhongMaterial",{attach:"material",color:"#f3f3f3"}),Object(g.jsx)(d.a,{color:"orange",attach:"material",distort:z.get(),speed:10}),Object(g.jsx)(O.a,{makeDefault:!0,ref:o,position:[0,1,2],rotation:[-Math.PI/16,0,0]})]})}))}function M(e){var t=Object(v.d)(E);return Object(g.jsx)("group",Object(s.a)(Object(s.a)({},e),{},{children:t.map((function(e){return Object(g.jsx)(V,{ball:e},e.ballId)}))}))}function V(e){var t=e.ball,n=Object(l.c)((function(){return{args:.2,mass:1,position:t.position.toArray(),velocity:t.velocity.toArray()}})),r=Object(j.a)(n,1)[0];return Object(g.jsxs)("mesh",Object(s.a)(Object(s.a)({},e),{},{ref:r,scale:.2,castShadow:!0,children:[Object(g.jsx)("sphereGeometry",{args:[1,16,16]}),Object(g.jsx)("meshToonMaterial",{attach:"material",color:"green"})]}))}function A(){return Object(g.jsxs)(p.a,{style:{backgroundColor:"#121212"},shadows:!0,children:[Object(g.jsx)(v.a,{children:Object(g.jsxs)(l.a,{gravity:[0,0,0],defaultContactMaterial:{friction:0,restitution:1},children:[Object(g.jsx)("ambientLight",{}),Object(g.jsx)("pointLight",{position:[30,10,10],castShadow:!0,"shadow-mapSize-width":4096,"shadow-mapSize-height":4096}),Object(g.jsx)(M,{}),Object(g.jsx)(C,{position:[0,0,0]}),Object(g.jsx)(L,{position:[0,0,0]})]})}),Object(g.jsxs)(m.a,{multisampling:0,children:[Object(g.jsx)(m.b,{active:!0,ratio:.85}),Object(g.jsx)(h.a,{radius:100,depth:50,count:5e3,factor:4,saturation:0,fade:!0}),Object(g.jsx)(m.c,{eskil:!1,offset:.1,darkness:1.1})]})]})}Object(f.a)({frustum:3.75,size:.005,near:9.5,samples:17,rings:11}),a.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(A,{})}),document.getElementById("root"))}},[[59,1,2]]]);
//# sourceMappingURL=main.a808bf61.chunk.js.map